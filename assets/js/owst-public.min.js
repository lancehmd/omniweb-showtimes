function owstInit(){function e(e){var t=e*Math.PI/180;return t}function t(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(o,a);else{var e={coords:{latitude:ipLatitude,longitude:ipLongitude}};o(e)}}function n(t,n){var o=e(t.latitude),a=e(t.longitude),i=e(n.latitude),r=e(n.longitude),d=6371,c=Math.acos(Math.sin(o)*Math.sin(i)+Math.cos(o)*Math.cos(i)*Math.cos(a-r))*d;return c}function o(e){var t=[];cinemaLocations.forEach(function(o){var a=n(e.coords,o),i=Math.round(a);t.push(i)});var o=i(t),a=cinemaLocations[o].code;"undefined"==typeof Storage||l()?r("my_theatre",a):localStorage.setItem("my_theatre",a);var d=cinemaLocations[o].code,c=document.getElementById("select-a-theatre");if(c)for(var u,f=c.options,m=0;u=f[m];m++)if(u.dataset.code==d){c.selectedIndex=m,s.action="theatres/"+u.dataset.slug;break}}function a(e){var t={0:"Unknown error",1:"Permission denied by user",2:"Position is not available",3:"Request timed out"},n=t[e.code];if(1===e.code){var a={coords:{latitude:ipLatitude,longitude:ipLongitude}};o(a)}0!=e.code&&2!=e.code||(n=n+" "+e.message);var i=document.createElement("div"),r=document.createTextNode(n);i.appendChild(r),i.classList.add("error-message"),i.style.display="none",document.body.appendChild(i)}function i(e){return e.indexOf(Math.min.apply(Math,e))}function r(e,t){var n=new Date;n.setTime(n.getTime()+12096e5);var o="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+o}function d(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}function c(){var e=document.getElementById("owst-date-selector");if(e){var t=e.querySelector("form"),n=e.querySelector("select");n.addEventListener("change",function(){t.submit()})}}function s(){var e=document.getElementById("find-showtimes"),t=document.getElementById("select-a-theatre");e&&e.addEventListener("submit",function(n){n.preventDefault();var o=t.options[t.selectedIndex].value;e.action="theatres/"+o,e.submit()})}function u(){var e=document.querySelector(".os-print-showtimes");e&&e.addEventListener("click",function(e){e.preventDefault(),window.open("?print","print_window","titlebar=no,toolbar=no,location=no,status=no,menubar=no,width=700,height=500")})}function l(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return!!(t>0||navigator.userAgent.match(/Trident.*rv\:11\./))}c(),s(),u();var f=null;f="undefined"==typeof Storage||l()?d("my_theatre"):localStorage.getItem("my_theatre");var m=document.getElementById("select-a-theatre");if(f){if(m)for(var v,g=m.options,h=0;v=g[h];h++)if(v.dataset.code==f){m.selectedIndex=h,s.action="theatres/"+v.value;break}}else window.onload=t}document.loaded?owstInit():window.addEventListener?window.addEventListener("load",owstInit(),!1):window.attachEvent("onload",owstInit());
